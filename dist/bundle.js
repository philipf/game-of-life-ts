!function(t){var X={};function e(n){if(X[n])return X[n].exports;var r=X[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=X,e.d=function(t,X,n){e.o(t,X)||Object.defineProperty(t,X,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,X){if(1&X&&(t=e(t)),8&X)return t;if(4&X&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&X&&"string"!=typeof t)for(var r in t)e.d(n,r,function(X){return t[X]}.bind(null,r));return n},e.n=function(t){var X=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(X,"a",X),X},e.o=function(t,X){return Object.prototype.hasOwnProperty.call(t,X)},e.p="",e(e.s=0)}([function(t,X,e){"use strict";function n(t){var X=t.myState,e=t.count;return!(!X||2!=e&&3!=e)||!X&&3==e}e.r(X);var r=function(){function t(t){this.gridModel=t}return t.prototype.getNeighbours=function(t,X){for(var e={count:0,states:[],myState:this.read(t,X)},n=0,r=-1;r<2;r++)for(var i=-1;i<2;i++){var o=t+i,u=X+r,a=this.read(o,u);if(e.states[n]=a,!(t===o&&X===u)&&a&&e.count++,e.count>3)return e;n++}return e},t.prototype.read=function(t,X){return!(t<0||t>=this.gridModel.width)&&(!(X<0||X>=this.gridModel.height)&&this.gridModel.getValue(t,X))},t}(),i=function(){function t(t,X){this.height=t,this.width=X,this.state=[]}return t.prototype.setValue=function(t,X,e){if(t>=this.width||X>=this.height)throw"Outside of grid boundary. Grid size["+this.width+","+this.height+"] but trying to set ["+t+","+X+"]";this.state[t]||(this.state[t]=[]),this.state[t][X]=e},t.prototype.getValue=function(t,X){if(!this.state||!this.state[t])return!1;var e=this.state[t][X];return e||!1},t}(),o=function(t,X,e){this.x=t,this.y=X,this.state=e},u=function(){function t(t,X){this.currentState=new i(t,X),this.gridReader=new r(this.currentState)}return t.prototype.tick=function(){for(var t=new Array,X=0;X<this.currentState.height;X++)for(var e=0;e<this.currentState.width;e++){var r=this.gridReader.getNeighbours(e,X),i=r.myState,u=n(r);i!=u&&t.push(new o(e,X,u))}return this.applyChanges(t),t},t.prototype.applyChanges=function(t){var X=this;t.forEach((function(t){X.currentState.setValue(t.x,t.y,t.state)}))},t}(),a=function(){function t(){}return t.create=function(t,X,e){void 0===X&&(X=0),void 0===e&&(e=0),t=t.trim();var n=new Array,r=t.split(/\r?\n/),i=0;return r.forEach((function(t){var r=t.trim().split(","),u=0;r.forEach((function(t){"x"==t.toLowerCase()&&n.push(new o(X+u,e+i,!0)),u++})),i++})),n},t}();function s(t,X){X.forEach((function(X){var e=10*X.x+1*X.x,n=10*X.y+1*X.y;X.state?t.fillRect(e,n,10,10):t.clearRect(e,n,10,10)}))}document.addEventListener("DOMContentLoaded",(function(){var t=new u(50,100),X=a.create("\n    ,,,,,,,X,X,X,X,X,X,,,,,,,,,X,X,X,X,X,X,X,,,,,,,,,,,,,,X,X,X,X,X,X,,,\n    ,,,,,,X,,,,,,X,,,,,,,X,X,,,,,,,,X,X,,,,,,,,,,,X,,,,,,X,,,\n    ,,,,,X,,,,,,,X,,,,,X,X,,,,,,,,,,,,X,X,,,,,,,,X,,,,,,,X,,,\n    ,,,,X,,,,X,X,,,X,,,,X,,,,,,,X,X,X,,,,,,,X,,,,,,X,,,,X,X,,,X,,,\n    ,,,X,,,,X,,X,,,X,,,,X,,,,,,X,,,,X,,,,,,X,,,,,X,,,,X,,X,,,X,,,\n    ,,X,,,,X,,,X,,,X,,,,X,,,,,X,,,,,,X,,,,,X,,,,X,,,,X,,,X,,,X,,,\n    ,X,,,,X,,,,X,,,X,,,,X,,,,,X,,,,,,X,,,,,X,,,X,,,,X,,,,X,,,X,,,\n    X,,,,X,X,X,X,X,X,,,X,X,X,,X,,,,,X,,,,,,X,,,,,X,,X,,,,X,X,X,X,X,X,,,X,X,X,\n    X,,,,,,,,,,,,,,X,,X,,,,,X,,,,,,X,,,,,X,,X,,,,,,,,,,,,,,X,\n    X,,,,,,,,,,,,,,x,,X,,,,,X,,,,,,X,,,,,X,,X,,,,,,,,,,,,,,x,\n    X,X,X,X,X,X,X,X,X,,,,X,X,X,,X,,,,,X,,,,,,X,,,,,X,,X,X,X,X,X,X,X,X,X,,,,X,X,X,\n    ,,,,,,,,X,,,,X,,,,X,,,,,X,,,,,,X,,,,,X,,,,,,,,,,X,,,,X,,,\n    ,,,,,,,,X,,,,X,,,,X,,,,,,X,,,,X,,,,,,X,,,,,,,,,,X,,,,X,,,\n    ,,,,,,,,X,,,,X,,,,X,,,,,,,X,X,X,,,,,,,X,,,,,,,,,,X,,,,X,,,\n    ,,,,,,,X,X,,,,X,X,,,,X,X,,,,,,,,,,,,X,X,,,,,,,,,,X,X,,,,X,X,,\n    ,,,,,,,X,,,,,,X,,,,,,X,X,,,,,,,,X,X,,,,,,,,,,,,X,,,,,,X,,\n    ,,,,,,,X,X,X,X,X,X,X,,,,,,,,X,X,X,X,X,X,X,,,,,,,,,,,,,,X,X,X,X,X,X,X,,\n    \n    ",13,12);t.applyChanges(X);var e=document.getElementById("grid");e||console.log("oops no canvas ");var n=e.getContext("2d");if(n){n.fillStyle="#515151";var r=n;s(r,X),setTimeout((function(){setInterval((function(){X=t.tick(),s(r,X)}),200)}),2e3)}}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dldE91dGNvbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dyaWRSZWFkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dyaWRNb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ2VsbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvR2FtZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NlbGxGYWN0b3J5LnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImdldE91dGNvbWUiLCJuZWlnaGJvdXJzIiwiaXNBY3RpdmUiLCJteVN0YXRlIiwiY291bnQiLCJHcmlkUmVhZGVyIiwiZ3JpZE1vZGVsIiwidGhpcyIsImdldE5laWdoYm91cnMiLCJ4IiwieSIsInN0YXRlcyIsInJlYWQiLCJhcnJheUlkeCIsInluIiwieG4iLCJ4ciIsInlyIiwid2lkdGgiLCJoZWlnaHQiLCJnZXRWYWx1ZSIsIkdyaWRNb2RlbCIsInN0YXRlIiwic2V0VmFsdWUiLCJyZXN1bHQiLCJDZWxsIiwiR2FtZVNlcnZpY2UiLCJjdXJyZW50U3RhdGUiLCJncmlkUmVhZGVyIiwidGljayIsImNoYW5nZXMiLCJBcnJheSIsIm5ld1N0YXRlIiwicHVzaCIsImFwcGx5Q2hhbmdlcyIsIl90aGlzIiwiZm9yRWFjaCIsIkNlbGxGYWN0b3J5IiwidmFsdWVzIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJ0cmltIiwibGluZXMiLCJzcGxpdCIsInRjZWxscyIsInRjIiwidG9Mb3dlckNhc2UiLCJkcmF3Q2hhbmdlcyIsImN0eCIsInhQb3MiLCJ5UG9zIiwiZmlsbFJlY3QiLCJjbGVhclJlY3QiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXJ2aWNlIiwiY2FudmFzIiwiZ2V0RWxlbWVudEJ5SWQiLCJjb25zb2xlIiwibG9nIiwiZ2V0Q29udGV4dCIsImZpbGxTdHlsZSIsImNfMSIsInNldFRpbWVvdXQiLCJzZXRJbnRlcnZhbCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIs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YWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldE91dGNvbWUobmVpZ2hib3Vycykge1xuICAgIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbndheSUyN3NfR2FtZV9vZl9MaWZlXG4gICAgdmFyIGlzQWN0aXZlID0gbmVpZ2hib3Vycy5teVN0YXRlO1xuICAgIHZhciBjb3VudCA9IG5laWdoYm91cnMuY291bnQ7XG4gICAgLy8gQW55IGxpdmUgY2VsbCB3aXRoIHR3byBvciB0aHJlZSBsaXZlIG5laWdoYm91cnMgc3Vydml2ZXMuXG4gICAgaWYgKGlzQWN0aXZlICYmIChjb3VudCA9PSAyIHx8IGNvdW50ID09IDMpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBBbnkgZGVhZCBjZWxsIHdpdGggdGhyZWUgbGl2ZSBuZWlnaGJvdXJzIGJlY29tZXMgYSBsaXZlIGNlbGwuXG4gICAgaWYgKCFpc0FjdGl2ZSAmJiBjb3VudCA9PSAzKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBBbGwgb3RoZXIgbGl2ZSBjZWxscyBkaWUgaW4gdGhlIG5leHQgZ2VuZXJhdGlvbi4gXG4gICAgLy8gU2ltaWxhcmx5LCBhbGwgb3RoZXIgZGVhZCBjZWxscyBzdGF5IGRlYWQuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuIiwidmFyIEdyaWRSZWFkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR3JpZFJlYWRlcihncmlkTW9kZWwpIHtcbiAgICAgICAgdGhpcy5ncmlkTW9kZWwgPSBncmlkTW9kZWw7XG4gICAgfVxuICAgIEdyaWRSZWFkZXIucHJvdG90eXBlLmdldE5laWdoYm91cnMgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgbiA9IHtcbiAgICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgICAgc3RhdGVzOiBbXSxcbiAgICAgICAgICAgIG15U3RhdGU6IHRoaXMucmVhZCh4LCB5KVxuICAgICAgICB9O1xuICAgICAgICB2YXIgYXJyYXlJZHggPSAwO1xuICAgICAgICBmb3IgKHZhciB5biA9IC0xOyB5biA8IDI7IHluKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIHhuID0gLTE7IHhuIDwgMjsgeG4rKykge1xuICAgICAgICAgICAgICAgIC8vIEFwcGx5IG5laWdoYm91ciBvZmZzZXRzXG4gICAgICAgICAgICAgICAgdmFyIHhyID0geCArIHhuO1xuICAgICAgICAgICAgICAgIHZhciB5ciA9IHkgKyB5bjtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnJlYWQoeHIsIHlyKTtcbiAgICAgICAgICAgICAgICBuLnN0YXRlc1thcnJheUlkeF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgaXNDdXJyZW50Q2VsbCA9ICh4ID09PSB4ciAmJiB5ID09PSB5cik7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0N1cnJlbnRDZWxsICYmIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG4uY291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gT3B0aW1pc2F0aW9uLCBydWxlcyBvbmx5IGdvIHVwIDNcbiAgICAgICAgICAgICAgICBpZiAobi5jb3VudCA+IDMpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgICAgICAgIGFycmF5SWR4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfTtcbiAgICBHcmlkUmVhZGVyLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgLy8gVE9ETzogYWRkIHJlYWQgc3RyYXRlZ3lcbiAgICAgICAgaWYgKHggPCAwIHx8IHggPj0gdGhpcy5ncmlkTW9kZWwud2lkdGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh5IDwgMCB8fCB5ID49IHRoaXMuZ3JpZE1vZGVsLmhlaWdodClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZE1vZGVsLmdldFZhbHVlKHgsIHkpO1xuICAgIH07XG4gICAgcmV0dXJuIEdyaWRSZWFkZXI7XG59KCkpO1xuZXhwb3J0IHsgR3JpZFJlYWRlciB9O1xuIiwidmFyIEdyaWRNb2RlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHcmlkTW9kZWwoaGVpZ2h0LCB3aWR0aCkge1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLnN0YXRlID0gW107XG4gICAgfVxuICAgIEdyaWRNb2RlbC5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbiAoeCwgeSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHggPj0gdGhpcy53aWR0aCB8fCB5ID49IHRoaXMuaGVpZ2h0KVxuICAgICAgICAgICAgdGhyb3cgXCJPdXRzaWRlIG9mIGdyaWQgYm91bmRhcnkuIEdyaWQgc2l6ZVtcIiArIHRoaXMud2lkdGggKyBcIixcIiArIHRoaXMuaGVpZ2h0ICsgXCJdIGJ1dCB0cnlpbmcgdG8gc2V0IFtcIiArIHggKyBcIixcIiArIHkgKyBcIl1cIjtcbiAgICAgICAgLy8gSklUIGluaXRpYWxpc2F0aW9uXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZVt4XSlcbiAgICAgICAgICAgIHRoaXMuc3RhdGVbeF0gPSBbXTtcbiAgICAgICAgdGhpcy5zdGF0ZVt4XVt5XSA9IHZhbHVlO1xuICAgIH07XG4gICAgR3JpZE1vZGVsLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIC8vIEd1YXJkIGNvbmRpdGlvbnMgaGVyZVxuICAgICAgICAvLyBJZiBub3QgeWV0IGluaXRpYWxpc2VkIGl0IGlzIGFjY2VwdGFibGUgdG8gcmV0dXJuIGZhbHNlLCBcbiAgICAgICAgLy8gdGhlcmVieSBub3QgaGF2aW5nIHRvIGludGlhbGlzZSB0aGUgd2hvbGUgZ3JpZCB0byBmYWxzZSB2YWx1ZXNcbiAgICAgICAgLy8gd2hlbiBpbnRpYWxpc2VkLlxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUgfHwgIXRoaXMuc3RhdGVbeF0pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnN0YXRlW3hdW3ldO1xuICAgICAgICAvLyBTYW1lLCBpZiBub3QgaW5pdGlhbGlzZWQgdGhlbiBkZWZhdWx0IHRvIGZhbHNlLlxuICAgICAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIHJldHVybiBHcmlkTW9kZWw7XG59KCkpO1xuZXhwb3J0IHsgR3JpZE1vZGVsIH07XG4iLCJ2YXIgQ2VsbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDZWxsKHgsIHksIHN0YXRlKSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIENlbGw7XG59KCkpO1xuZXhwb3J0IHsgQ2VsbCB9O1xuIiwiaW1wb3J0IHsgZ2V0T3V0Y29tZSB9IGZyb20gJy4vZ2V0T3V0Y29tZSc7XG5pbXBvcnQgeyBHcmlkUmVhZGVyIH0gZnJvbSAnLi9HcmlkUmVhZGVyJztcbmltcG9ydCB7IEdyaWRNb2RlbCB9IGZyb20gXCIuL0dyaWRNb2RlbFwiO1xuaW1wb3J0IHsgQ2VsbCB9IGZyb20gJy4vQ2VsbCc7XG52YXIgR2FtZVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR2FtZVNlcnZpY2UoaGVpZ2h0LCB3aWR0aCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IG5ldyBHcmlkTW9kZWwoaGVpZ2h0LCB3aWR0aCk7XG4gICAgICAgIHRoaXMuZ3JpZFJlYWRlciA9IG5ldyBHcmlkUmVhZGVyKHRoaXMuY3VycmVudFN0YXRlKTtcbiAgICB9XG4gICAgLy8gVE9ETyBPcHRpbWlzZSwgb25seSByZWFkIGFjdGl2ZSBtYXBcbiAgICBHYW1lU2VydmljZS5wcm90b3R5cGUudGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNoYW5nZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmN1cnJlbnRTdGF0ZS5oZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLmN1cnJlbnRTdGF0ZS53aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5laWdoYm91cnMgPSB0aGlzLmdyaWRSZWFkZXIuZ2V0TmVpZ2hib3Vycyh4LCB5KTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gbmVpZ2hib3Vycy5teVN0YXRlO1xuICAgICAgICAgICAgICAgIHZhciBuZXdTdGF0ZSA9IGdldE91dGNvbWUobmVpZ2hib3Vycyk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSAhPSBuZXdTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2gobmV3IENlbGwoeCwgeSwgbmV3U3RhdGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoY2hhbmdlcyk7XG4gICAgICAgIHJldHVybiBjaGFuZ2VzO1xuICAgIH07XG4gICAgR2FtZVNlcnZpY2UucHJvdG90eXBlLmFwcGx5Q2hhbmdlcyA9IGZ1bmN0aW9uIChjaGFuZ2VzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGNoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgX3RoaXMuY3VycmVudFN0YXRlLnNldFZhbHVlKGMueCwgYy55LCBjLnN0YXRlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gR2FtZVNlcnZpY2U7XG59KCkpO1xuZXhwb3J0IHsgR2FtZVNlcnZpY2UgfTtcbiIsImltcG9ydCB7IENlbGwgfSBmcm9tIFwiLi9DZWxsXCI7XG52YXIgQ2VsbEZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2VsbEZhY3RvcnkoKSB7XG4gICAgfVxuICAgIENlbGxGYWN0b3J5LmNyZWF0ZSA9IGZ1bmN0aW9uICh2YWx1ZXMsIG9mZnNldFgsIG9mZnNldFkpIHtcbiAgICAgICAgaWYgKG9mZnNldFggPT09IHZvaWQgMCkgeyBvZmZzZXRYID0gMDsgfVxuICAgICAgICBpZiAob2Zmc2V0WSA9PT0gdm9pZCAwKSB7IG9mZnNldFkgPSAwOyB9XG4gICAgICAgIHZhbHVlcyA9IHZhbHVlcy50cmltKCk7XG4gICAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdmFyIGxpbmVzID0gdmFsdWVzLnNwbGl0KC9cXHI/XFxuLyk7XG4gICAgICAgIHZhciB5ID0gMDtcbiAgICAgICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgdmFyIHRjZWxscyA9IGwudHJpbSgpLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgICAgIHZhciB4ID0gMDtcbiAgICAgICAgICAgIHRjZWxscy5mb3JFYWNoKGZ1bmN0aW9uICh0Yykge1xuICAgICAgICAgICAgICAgIGlmICh0Yy50b0xvd2VyQ2FzZSgpID09IFwieFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBDZWxsKG9mZnNldFggKyB4LCBvZmZzZXRZICsgeSwgdHJ1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHkrKztcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ2VsbEZhY3Rvcnk7XG59KCkpO1xuZXhwb3J0IHsgQ2VsbEZhY3RvcnkgfTtcbiIsImltcG9ydCB7IEdhbWVTZXJ2aWNlIH0gZnJvbSBcIi4vR2FtZVNlcnZpY2VcIjtcbmltcG9ydCB7IENlbGxGYWN0b3J5IH0gZnJvbSBcIi4vQ2VsbEZhY3RvcnlcIjtcbnZhciBjZWxsSGVpZ2h0ID0gMTA7XG52YXIgY2VsbFdpZHRoID0gY2VsbEhlaWdodDtcbnZhciBjZWxsQm9yZGVyID0gMTtcbmZ1bmN0aW9uIGRyYXdDaGFuZ2VzKGN0eCwgY2hhbmdlcykge1xuICAgIGNoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICB2YXIgeFBvcyA9IGMueCAqIGNlbGxXaWR0aCArIChjLnggKiBjZWxsQm9yZGVyKTtcbiAgICAgICAgdmFyIHlQb3MgPSBjLnkgKiBjZWxsV2lkdGggKyAoYy55ICogY2VsbEJvcmRlcik7XG4gICAgICAgIGlmIChjLnN0YXRlKSB7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoeFBvcywgeVBvcywgY2VsbFdpZHRoLCBjZWxsSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoeFBvcywgeVBvcywgY2VsbFdpZHRoLCBjZWxsSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZXJ2aWNlID0gbmV3IEdhbWVTZXJ2aWNlKDUwLCAxMDApO1xuICAgIHZhciB2YWx1ZXMgPSBcIlxcbiAgICAsLCwsLCwsWCxYLFgsWCxYLFgsLCwsLCwsLCxYLFgsWCxYLFgsWCxYLCwsLCwsLCwsLCwsLCxYLFgsWCxYLFgsWCwsLFxcbiAgICAsLCwsLCxYLCwsLCwsWCwsLCwsLCxYLFgsLCwsLCwsLFgsWCwsLCwsLCwsLCwsWCwsLCwsLFgsLCxcXG4gICAgLCwsLCxYLCwsLCwsLFgsLCwsLFgsWCwsLCwsLCwsLCwsLFgsWCwsLCwsLCwsWCwsLCwsLCxYLCwsXFxuICAgICwsLCxYLCwsLFgsWCwsLFgsLCwsWCwsLCwsLCxYLFgsWCwsLCwsLCxYLCwsLCwsWCwsLCxYLFgsLCxYLCwsXFxuICAgICwsLFgsLCwsWCwsWCwsLFgsLCwsWCwsLCwsLFgsLCwsWCwsLCwsLFgsLCwsLFgsLCwsWCwsWCwsLFgsLCxcXG4gICAgLCxYLCwsLFgsLCxYLCwsWCwsLCxYLCwsLCxYLCwsLCwsWCwsLCwsWCwsLCxYLCwsLFgsLCxYLCwsWCwsLFxcbiAgICAsWCwsLCxYLCwsLFgsLCxYLCwsLFgsLCwsLFgsLCwsLCxYLCwsLCxYLCwsWCwsLCxYLCwsLFgsLCxYLCwsXFxuICAgIFgsLCwsWCxYLFgsWCxYLFgsLCxYLFgsWCwsWCwsLCwsWCwsLCwsLFgsLCwsLFgsLFgsLCwsWCxYLFgsWCxYLFgsLCxYLFgsWCxcXG4gICAgWCwsLCwsLCwsLCwsLCwsWCwsWCwsLCwsWCwsLCwsLFgsLCwsLFgsLFgsLCwsLCwsLCwsLCwsLFgsXFxuICAgIFgsLCwsLCwsLCwsLCwsLHgsLFgsLCwsLFgsLCwsLCxYLCwsLCxYLCxYLCwsLCwsLCwsLCwsLCx4LFxcbiAgICBYLFgsWCxYLFgsWCxYLFgsWCwsLCxYLFgsWCwsWCwsLCwsWCwsLCwsLFgsLCwsLFgsLFgsWCxYLFgsWCxYLFgsWCxYLCwsLFgsWCxYLFxcbiAgICAsLCwsLCwsLFgsLCwsWCwsLCxYLCwsLCxYLCwsLCwsWCwsLCwsWCwsLCwsLCwsLCxYLCwsLFgsLCxcXG4gICAgLCwsLCwsLCxYLCwsLFgsLCwsWCwsLCwsLFgsLCwsWCwsLCwsLFgsLCwsLCwsLCwsWCwsLCxYLCwsXFxuICAgICwsLCwsLCwsWCwsLCxYLCwsLFgsLCwsLCwsWCxYLFgsLCwsLCwsWCwsLCwsLCwsLCxYLCwsLFgsLCxcXG4gICAgLCwsLCwsLFgsWCwsLCxYLFgsLCwsWCxYLCwsLCwsLCwsLCwsWCxYLCwsLCwsLCwsLFgsWCwsLCxYLFgsLFxcbiAgICAsLCwsLCwsWCwsLCwsLFgsLCwsLCxYLFgsLCwsLCwsLFgsWCwsLCwsLCwsLCwsLFgsLCwsLCxYLCxcXG4gICAgLCwsLCwsLFgsWCxYLFgsWCxYLFgsLCwsLCwsLFgsWCxYLFgsWCxYLFgsLCwsLCwsLCwsLCwsLFgsWCxYLFgsWCxYLFgsLFxcbiAgICBcXG4gICAgXCI7XG4gICAgdmFyIGNoYW5nZXMgPSBDZWxsRmFjdG9yeS5jcmVhdGUodmFsdWVzLCAxMywgMTIpO1xuICAgIHNlcnZpY2UuYXBwbHlDaGFuZ2VzKGNoYW5nZXMpO1xuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JpZCcpO1xuICAgIGlmICghY2FudmFzKVxuICAgICAgICBjb25zb2xlLmxvZyhcIm9vcHMgbm8gY2FudmFzIFwiKTtcbiAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgaWYgKGN0eCkge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCIjNTE1MTUxXCI7XG4gICAgICAgIHZhciBjXzEgPSBjdHg7XG4gICAgICAgIGRyYXdDaGFuZ2VzKGNfMSwgY2hhbmdlcyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNoYW5nZXMgPSBzZXJ2aWNlLnRpY2soKTtcbiAgICAgICAgICAgICAgICBkcmF3Q2hhbmdlcyhjXzEsIGNoYW5nZXMpO1xuICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgfSwgMjAwMCk7XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9